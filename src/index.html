<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<title>登录快乐在线聊天室</title>
<script>/* USERS_PLACEHOLDER */</script>
<script src="https://cdn.jsdelivr.net/npm/crypto-js@4/crypto-js.min.js"></script>
<style>
  body{font-family:system-ui;background:#f5f5f5;display:flex;height:100vh;align-items:center;justify-content:center}
  .card{background:#fff;padding:40px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);width:280px}
  input{width:94%;margin:8px 0;padding:8px;border:1px solid #bbb;border-radius:4px}
  button{width:100%;margin:8px 0;padding:10px;border:0;background:#0066ff;color:#fff;border-radius:4px;cursor:pointer}
  .err{color:red;font-size:14px;margin-top:8px}
</style>
</head>
<body>
  <form class="card" id="loginForm">
    <h3 style="margin-top:0">登录快乐在线聊天室</h3>
    <input type="tel" placeholder="手机号" required id="phone">
    <input type="password" placeholder="密码" required id="pwd">
    <button type="submit">进入</button>
    <div class="err" id="err"></div>
  </form>

<script>
async function login(e){
  e.preventDefault();
  const phone = phoneInput.value.trim();
  const pwd   = pwdInput.value.trim();
  // const list  = await fetch('users.json').then(r=>r.json());
   //const hit   = list.find(u=>u.phone===phone && u.pwd===CryptoJS.MD5(pwd).toString());
const hit   = USERS.find(u=>u.phone===phone && u.pwd===CryptoJS.MD5(pwd).toString());
  //const hit   = USERS.find(u => u.phone === phone && u.pwd === pwd);
  if(hit){
    sessionStorage.setItem('chat_user',phone);
    sessionStorage.setItem('chat_name', hit.name);
    location.href='chat.html';
  }else{
    err.textContent='账号或密码错误';
  }
}
const phoneInput=document.getElementById('phone');
const pwdInput  =document.getElementById('pwd');
const err       =document.getElementById('err');
document.getElementById('loginForm').addEventListener('submit',login);
</script>
</body>
</html>